class CachingConfigTest {

    private lateinit var config: CachingConfig
    private lateinit var cacheManager: CacheManager

    @BeforeEach
    fun setup() {
        // Crée l'instance de config
        config = CachingConfig()
        // Assure-toi que cacheManager est prêt
        cacheManager = config.cacheManager ?: ConcurrentMapCacheManager("customer_policy", "loader_batches")
    }

    @Test
    fun `should create a ConcurrentMapCacheManager`() {
        assertTrue(cacheManager is ConcurrentMapCacheManager)
    }

    @Test
    fun `should define correct cache names`() {
        val cacheNames = cacheManager.cacheNames
        assertTrue(cacheNames.contains("customer_policy"))
        assertTrue(cacheNames.contains("loader_batches"))
        assertEquals(2, cacheNames.size)
    }

    @Test
    fun `should return non-null cache instances`() {
        assertNotNull(cacheManager.getCache("customer_policy"))
        assertNotNull(cacheManager.getCache("loader_batches"))
    }
}